{{>main/layout/library}}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주식과 부동산 </title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style-stock.css"/>

</head>



<body>

    <header>
        <div class="logo" onclick="location.href('#')"><img src="/img/logo.png"></div>
    </header>

    <div class="searchConatiner">
        <input id="search" type="text"  placeholder="품목명 입력"  onfocus="this.placeholder=''" onblur="this.placeholder='품목명 입력'">
        <div id="searchBtn" ><img src="/img/searchView.png"></div>
    </div>

    <div class="infoContainer">
	    <table class="infoArea">
            <tr>
                <th class="infoTh section02 " >코드</th>
                <th class="infoTh section01">종목명</th>
                <th class="infoTh section02">전일종가</th>
                <th class="infoTh section02">적정매수가</th>
                <th class="infoTh section02">비율</th>
                <th class="infoTh section02">적정매도가</th>
                <th class="infoTh section02">의견</th>
                <th class="infoTh section02">기타의견</th>
                <th class="infoTh section02">상세보기</th>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="/img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="/img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="./img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="./img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="./img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="./img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="./img/view.png"></a></td>
            </tr>
            <tr>
                <td class="infoTd">A066400</td>
                <td class="infoTd ">HANATOURIST</td>
                <td class="infoTd">9,999</td>
                <td class="infoTd">999</td>
                <td class="infoTd">99,999</td>
                <td class="infoTd">9</td>
                <td class="infoTd">99</td>
                <td class="infoTd">999,999</td>
                <td class="infoTd" ><a href="#" target="blank"><img src="./img/view.png"></a></td>
            </tr>
	    </table>
    </div>

<div id="crtfcKey"></div>

<select id="crtfcList">
</select>

<button id="getCrt" onClick="getCrtApi()">검색</button>

<br>
<textarea id="txtArea"></textarea>

</body>
</html>




<script>
$(document).ready(function() {
	getCrtfc();
});

function getCrtfc(){
	$.ajax({
		type: 'POST',
		url: '/stock/getCrtfc',
		data: {},
		dataType: 'JSON',
		success: function(data)
		{			
			if(data.result == 1){
				$("#crtfcList").empty();
				
				if(data.cropcordList.length == 0){
					$("#crtfcList").append("<option value=''>선택</option>");
				} else {
					$("#crtfcList").append("<option value=''>선택</option>");
					for(var i=0; i<data.cropcordList.length; i++){
						$("#crtfcList").append("<option value='" + data.cropcordList[i].corpCode + "'>" + data.cropcordList[i].corpName + "</option>");
					}
				}
			} else {
				alert("데이터를 가져올 수 없습니다");
			}
		},
		error:function(request,status,data)
		{
	        console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+data);
	    }
	});

}

function getCrtApi(){
	if($("#crtfcList").val()==''){
		alert("회사를 선택해주세요");
		return;
	}

	$.ajax({
		type: 'POST',
		url: '/stock/getCrtApi',
		data: {"cropCord" : $("#crtfcList").val()},
		dataType: 'JSON',
		success: function(data)
		{			
			if(data.result == 1){
				alert("가져오기성공");
				$("#txtArea").val(data.cropJson);
			} else {
				alert("데이터를 가져올 수 없습니다");
			}
		},
		error:function(request,status,data)
		{
	        console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+data);
	    }
	});
}
</script>